<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: preload/preload.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: preload/preload.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// preload.js
const {ipcRenderer, contextBridge, app} = require('electron');

const {
	addEventListener, getAttribute,
	setAttribute, addChild, setHTML,
	setStyle, getValue, loadPage,
	addGrid,
} = require('./dom/domAPICalls.js');

const {
	setPath,
} = require('./ffmpeg/ffmpegAPICalls.js');

const {
	ffmpegRead, ffmpegWrite,
	useMultiFFmpeg,
} = require('./ffmpeg/metadata/ffMetaAPICalls');

const {
	pauseSong, playSong, stopSong, resumeSong,
} = require('./ffmpeg/play/playSongAPICalls');

const {
	recursiveSearchAtPath, getSRCString,
	fsInit, devClear,
} = require('./fs/fsAPICalls');

const {
	getAllPlaylists, getPlaylist,
	removePlaylist, writePlaylist,
} = require('./fs/playlists/playlistAPICalls');

const {
	appendSong, appendSongs, cullShortAudio,
	getSongs, removeSong, writeSongs,
} = require('./fs/songs/songsAPICalls');

const {
	deleteSetting, getSetting, getSettings,
	writeSettings, writeToSetting,
} = require('./fs/settings/settingsAPICalls');

const {
	deleteStat, getStats, writeStats, writeToStat,
} = require('./fs/stats/statsAPICalls');

const {
	debugLog, openDialog,
} = require('./general/genAPICalls.js');

/**
 * @namespace domAPI
 * @description The domAPI is an api that exposes useful accessors to DOM elements, such as addEventListener and
 *              getAttribute. All calls are managed, so one cannot access sensitive information. &lt;br>
 *              If you think that any function headers or return types should be changed, ping me on slack. - Liam
 * @type object
 */
window.domAPI = undefined;

/**
 * @namespace ffmpegAPI
 * @description the ffmpegAPI allows one to get and set metadata of a file.
 * @type {object}
 */
window.ffmpegAPI = undefined;

/**
 * @namespace fsAPI
 * @description The fsAPI exposes many functions to modify the settings, overall songs, stats, playlists, and get
 *              a working src filepath for any audio file.
 * @type {object}
 * @todo In general there are usually no checks to see if the file exists. These should be added, and until then
 *          this API should be used with caution.
 */
window.fsAPI = undefined;

/**
 * @namespace genAPI
 * @description A collection of general methods useful for production and debugging.
 * @type {object}
 */
window.genAPI = undefined;

// All the Node.js APIs are available in the preload process.
// It has the same sandbox as a Chrome extension.
window.addEventListener('DOMContentLoaded', async () => {
	const replaceText = (selector, text) => {
		const element = document.getElementById(selector);
		if (element) element.innerText = text;
	};

	for (const dependency of ['chrome', 'node', 'electron']) {
		replaceText(`${dependency}-version`, process.versions[dependency]);
	}

	await fsInit();
	await setPath();
});

contextBridge.exposeInMainWorld('genAPI', {
	debugLog: debugLog,
	openDialog: openDialog,
});

contextBridge.exposeInMainWorld('domAPI', {
	addEventListener: addEventListener,
	getAttribute: getAttribute,
	setAttribute: setAttribute,
	addChild: addChild,
	setHTML: setHTML,
	setStyle: setStyle,
	getValue: getValue,
	loadPage: loadPage,
	addGrid: addGrid,

});

contextBridge.exposeInMainWorld('ffmpegAPI', {
	readMetadata: ffmpegRead,
	writeMetadata: ffmpegWrite,
	setBinPath: setPath,
	playSong: playSong,
	stopSong: stopSong,
	pauseSong: pauseSong,
	resumeSong: resumeSong,
	useMultiFFmpeg: useMultiFFmpeg,
});

contextBridge.exposeInMainWorld('fsAPI', {
	getSettings: getSettings,
	writeSettings: writeSettings,
	writeToSetting: writeToSetting,
	deleteSetting: deleteSetting,
	getSetting: getSetting,
	getSongs: getSongs,
	appendSongs: appendSongs,
	writeSong: writeSongs,
	appendSong: appendSong,
	removeSong: removeSong,
	getStats: getStats,
	writeStats: writeStats,
	writeToStat: writeToStat,
	deleteStat: deleteStat,
	getAllPlaylists: getAllPlaylists,
	removePlaylist: removePlaylist,
	writePlaylist: writePlaylist,
	getSRCString: getSRCString,
	recursiveSearchAtPath: recursiveSearchAtPath,
	cullShortAudio: cullShortAudio,
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="domAPI.html">domAPI</a></li><li><a href="ffmpegAPI.html">ffmpegAPI</a></li><li><a href="fsAPI.html">fsAPI</a></li><li><a href="genAPI.html">genAPI</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addGrid">addGrid</a></li><li><a href="global.html#addPath">addPath</a></li><li><a href="global.html#addToPlaylist">addToPlaylist</a></li><li><a href="global.html#appendSongs">appendSongs</a></li><li><a href="global.html#createMultiFFmpegPromise">createMultiFFmpegPromise</a></li><li><a href="global.html#createPlaylist">createPlaylist</a></li><li><a href="global.html#editMetaData">editMetaData</a></li><li><a href="global.html#enabledTags">enabledTags</a></li><li><a href="global.html#eventHandlerLoadPhase">eventHandlerLoadPhase</a></li><li><a href="global.html#ffmpegReadPromise">ffmpegReadPromise</a></li><li><a href="global.html#findCategories">findCategories</a></li><li><a href="global.html#fsInit">fsInit</a></li><li><a href="global.html#getFile">getFile</a></li><li><a href="global.html#getMultiCMD">getMultiCMD</a></li><li><a href="global.html#getReadCMD">getReadCMD</a></li><li><a href="global.html#getReadCMDForSpawn">getReadCMDForSpawn</a></li><li><a href="global.html#getSourceFolder">getSourceFolder</a></li><li><a href="global.html#getStoragePath">getStoragePath</a></li><li><a href="global.html#getWriteCMD">getWriteCMD</a></li><li><a href="global.html#homeClick">homeClick</a></li><li><a href="global.html#htmlFromRenderer">htmlFromRenderer</a></li><li><a href="global.html#libraryAlbumsClick">libraryAlbumsClick</a></li><li><a href="global.html#libraryArtistsClick">libraryArtistsClick</a></li><li><a href="global.html#libraryClick">libraryClick</a></li><li><a href="global.html#libraryGenresClick">libraryGenresClick</a></li><li><a href="global.html#libraryTagsClick">libraryTagsClick</a></li><li><a href="global.html#onLibraryLoad">onLibraryLoad</a></li><li><a href="global.html#overviewClick">overviewClick</a></li><li><a href="global.html#ovExLyricsClick">ovExLyricsClick</a></li><li><a href="global.html#ovExQueueClick">ovExQueueClick</a></li><li><a href="global.html#ovExTrackClick">ovExTrackClick</a></li><li><a href="global.html#playlistsClick">playlistsClick</a></li><li><a href="global.html#postInit">postInit</a></li><li><a href="global.html#postLibraryLoad">postLibraryLoad</a></li><li><a href="global.html#removeTempFile">removeTempFile</a></li><li><a href="global.html#rescanClick">rescanClick</a></li><li><a href="global.html#searchAlbumsClick">searchAlbumsClick</a></li><li><a href="global.html#searchAllClick">searchAllClick</a></li><li><a href="global.html#searchArtistsClick">searchArtistsClick</a></li><li><a href="global.html#searchGenresClick">searchGenresClick</a></li><li><a href="global.html#searchPlaylistsClick">searchPlaylistsClick</a></li><li><a href="global.html#searchTagsClick">searchTagsClick</a></li><li><a href="global.html#searchTracksClick">searchTracksClick</a></li><li><a href="global.html#setStoragePath">setStoragePath</a></li><li><a href="global.html#settingsClick">settingsClick</a></li><li><a href="global.html#submitSearch">submitSearch</a></li><li><a href="global.html#testAll">testAll</a></li><li><a href="global.html#testDeleteSetting">testDeleteSetting</a></li><li><a href="global.html#testGetSettings">testGetSettings</a></li><li><a href="global.html#testSettings">testSettings</a></li><li><a href="global.html#testSongs">testSongs</a></li><li><a href="global.html#testWriteSettings">testWriteSettings</a></li><li><a href="global.html#testWriteToSetting">testWriteToSetting</a></li><li><a href="global.html#topExtensionOff">topExtensionOff</a></li><li><a href="global.html#topExtensionOn">topExtensionOn</a></li><li><a href="global.html#useMultiFFmpeg">useMultiFFmpeg</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Tue Nov 15 2022 12:54:15 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
